(()=>{class e{constructor(){this.currentModal=null,this.lastFocusedElement=null,document.addEventListener("click",(e=>{const t=e.target.closest('[data-fs-toggle="modal"]');if(t){e.preventDefault();const s=t.getAttribute("data-fs-target");if(s){const e=document.querySelector(s);e&&(this.lastFocusedElement=t,this.show(e))}}e.target.closest('[data-fs-dismiss="modal"]')&&this.currentModal&&(e.preventDefault(),this.hide(this.currentModal))})),document.addEventListener("keydown",(e=>{this.currentModal&&"Escape"===e.key&&(e.preventDefault(),this.hide(this.currentModal))})),document.addEventListener("keydown",(e=>{this.currentModal&&"Tab"===e.key&&this.trapFocus(e)}))}show(e){e.dispatchEvent(new CustomEvent("fsModalShow",{bubbles:!0})),this.currentModal=e,document.body.classList.add("fs-modal-open"),e.style.display="flex",e.classList.add("show"),e.offsetWidth,e.addEventListener("click",this.outsideClickHandler),setTimeout((()=>{const t=this.getFocusableElements(e);t.length?t[0].focus():e.focus(),e.dispatchEvent(new CustomEvent("fsModalShown",{bubbles:!0}))}),300)}hide(e){e.dispatchEvent(new CustomEvent("fsModalHide",{bubbles:!0})),e.removeEventListener("click",this.outsideClickHandler),document.body.classList.remove("fs-modal-open"),e.classList.remove("show"),setTimeout((()=>{e.style.display="none",this.lastFocusedElement&&this.lastFocusedElement.focus(),this.currentModal=null,e.dispatchEvent(new CustomEvent("fsModalHidden",{bubbles:!0}))}),300)}outsideClickHandler=e=>{e.target.closest(".fs-modal-dialog")||this.currentModal&&this.hide(this.currentModal)};trapFocus(e){const t=this.getFocusableElements(this.currentModal);if(!t.length)return e.preventDefault(),void this.currentModal.focus();const s=t[0],n=t[t.length-1],o=e.target.ownerDocument.activeElement;e.shiftKey&&o===s?(e.preventDefault(),n.focus()):e.shiftKey||o!==n||(e.preventDefault(),s.focus())}getFocusableElements(e){return Array.from(e.querySelectorAll('a[href], button:not([disabled]), textarea:not([disabled]), input:not([type="hidden"]):not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])'))}}document.addEventListener("DOMContentLoaded",(()=>{new e}))})();