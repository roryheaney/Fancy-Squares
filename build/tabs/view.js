(()=>{class t{constructor(t){this.tabsContainer=t,this.tabList=this.tabsContainer.querySelector('[role="tablist"]'),this.tabList&&(this.orientation=this.tabList.getAttribute("data-fs-orientation")||"horizontal",this.tabs=Array.from(this.tabList.querySelectorAll('[role="tab"]')),this.panels=this.tabs.map((t=>{const e=t.getAttribute("aria-controls");return document.getElementById(e)})),this.initEvents(),this.ensureSingleActiveTab())}initEvents(){this.tabs.forEach((t=>{t.addEventListener("click",(()=>{this.activateTab(t)}))})),this.tabList.addEventListener("keydown",(t=>{switch(t.key){case"ArrowRight":case"ArrowLeft":"horizontal"===this.orientation&&(t.preventDefault(),"ArrowRight"===t.key?this.moveFocusNext():this.moveFocusPrev());break;case"ArrowUp":case"ArrowDown":"vertical"===this.orientation&&(t.preventDefault(),"ArrowDown"===t.key?this.moveFocusNext():this.moveFocusPrev());break;case"Home":t.preventDefault(),this.focusFirstTab();break;case"End":t.preventDefault(),this.focusLastTab()}}))}ensureSingleActiveTab(){const t=this.tabs.filter((t=>t.classList.contains("active")));if(0===t.length&&this.tabs.length>0)this.activateTab(this.tabs[0],!1);else if(t.length>1)for(let e=1;e<t.length;e++)this.deactivateTab(t[e],!1)}activateTab(t,e=!0){if(!t)return;const s=this.tabs.find((t=>t.classList.contains("active")));if(s===t)return;const a=s?document.getElementById(s.getAttribute("aria-controls")):null,i=document.getElementById(t.getAttribute("aria-controls"));s&&this.dispatchEvent("fsTabHide",{oldTab:s,oldPanel:a,newTab:t,newPanel:i}),this.dispatchEvent("fsTabShow",{oldTab:s,oldPanel:a,newTab:t,newPanel:i}),s&&this.deactivateTab(s,!1,!1),t.classList.add("active"),t.setAttribute("aria-selected","true"),t.setAttribute("tabindex","0"),this.showPanel(i,(()=>{this.dispatchEvent("fsTabShown",{oldTab:s,oldPanel:a,newTab:t,newPanel:i})})),e&&t.focus({preventScroll:!0})}deactivateTab(t,e=!1,s=!1){t.classList.remove("active"),t.setAttribute("aria-selected","false"),t.setAttribute("tabindex","-1");const a=t.getAttribute("aria-controls"),i=document.getElementById(a);i&&this.hidePanel(i,s,(()=>{this.dispatchEvent("fsTabHidden",{oldTab:t,oldPanel:i,newTab:null,newPanel:null})})),e&&t.focus()}showPanel(t,e){if(t)if(t.removeAttribute("hidden"),t.classList.add("active"),t.classList.contains("fade")){t.offsetWidth,t.classList.add("show");const s=a=>{a.target===t&&(t.removeEventListener("transitionend",s),e&&e())};t.addEventListener("transitionend",s)}else t.classList.add("show"),e&&e();else e&&e()}hidePanel(t,e,s){if(!t||!t.classList.contains("active"))return void(s&&s());if(e||!t.classList.contains("fade"))return t.classList.remove("active","show"),t.setAttribute("hidden","true"),void(s&&s());t.classList.remove("show");const a=e=>{e.target===t&&(t.removeEventListener("transitionend",a),t.classList.remove("active"),t.setAttribute("hidden","true"),s&&s())};t.addEventListener("transitionend",a)}moveFocusNext(){const t=this.tabs.findIndex((t=>t.classList.contains("active")));if(t<0)return void this.activateTab(this.tabs[0]);let e=t+1;e>=this.tabs.length&&(e=0),this.activateTab(this.tabs[e])}moveFocusPrev(){const t=this.tabs.findIndex((t=>t.classList.contains("active")));if(t<0)return void this.activateTab(this.tabs[0]);let e=t-1;e<0&&(e=this.tabs.length-1),this.activateTab(this.tabs[e])}focusFirstTab(){this.tabs.length>0&&this.activateTab(this.tabs[0])}focusLastTab(){this.tabs.length>0&&this.activateTab(this.tabs[this.tabs.length-1])}dispatchEvent(t,e){this.tabsContainer.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e}))}}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".wp-block-fs-blocks-tabs").forEach((e=>{new t(e)}))}))})();